<!DOCTYPE html>
<html>

<head>
<link rel="stylesheet" type="text/css" href="style.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>


<body>

<script type="text/javascript" id="klarna-credit-lib-x">
  /* <![CDATA[ */
  (function(w,d) {
    var url = 'https://credit.klarnacdn.net/lib/v1-playground/api.js';
    n = d.createElement('script');
    c = d.getElementById('klarna-credit-lib-x');
    n.async = !0;
    n.src = url + '?' + (new Date()).getTime();
    c.parentNode.replaceChild(n, c);
  })(this,document);
  /* ]]> */
</script>



<div id="klarna_container">

</div>


<a class="button" href="#">Place Order</a>


<script>
    window.onload = function() {
        var anchors = document.getElementsByTagName('a');
        for(var i = 0; i < anchors.length; i++) {
            var anchor = anchors[i];
            anchor.onclick = function() {

              Klarna.Credit.authorize({
  purchase_country: "US",
  purchase_currency: "USD",
  locale: "en-US",
  billing_address: {
    given_name: "John",
    family_name: "Doe",
    email: "john+require_signup@example.com",
    title: "Mr",
    street_address: "Lombard St 10",
    street_address2: "Apt 214",
    postal_code: "90210",
    city: "Beverly Hills",
    region: "CA",
    phone: "6148047677",
    country: "US"
  },
  shipping_address: {
    given_name: "John",
    family_name: "Doe",
    email: "john+require_signup@example.com",
    title: "Mr",
    street_address: "Lombard St 10",
    street_address2: "Apt 214",
    postal_code: "90210",
    city: "Beverly Hills",
    region: "CA",
    phone: "6148047677",
    country: "US"
  },
  order_amount: 100000,
  order_tax_amount: 0,
  order_lines: [{
    type: "physical",
    reference: "19-402-USA",
    name: "Battery Power Pack",
    quantity: 1,
    unit_price: 100000,
    tax_rate: 0,
    total_amount: 100000,
    total_discount_amount: 0,
    total_tax_amount: 0,
    product_url: "https://www.estore.com/products/f2a8d7e34",
    image_url: "https://www.exampleobjects.com/logo.png"
  }],

 }, function(res) {
  console.debug(res);
})


                //alert('ho ho ho');
            }
        }
    }
</script>


<script>

setTimeout( function() {

  Klarna.Credit.init({
    client_token: 'eyJhbGciOiJub25lIn0.ewogICJzZXNzaW9uX2lkIiA6ICJkYWEwNTk2MS1jOGFhLTU0NDUtYmQ2ZS02ZmYyZDgwODQyMmIiLAogICJiYXNlX3VybCIgOiAiaHR0cHM6Ly9jcmVkaXQtbmEucGxheWdyb3VuZC5rbGFybmEuY29tIiwKICAiZGVzaWduIiA6ICJrbGFybmEiLAogICJsYW5ndWFnZSIgOiAiZW4iLAogICJwdXJjaGFzZV9jb3VudHJ5IiA6ICJVUyIsCiAgInRyYWNlX2Zsb3ciIDogZmFsc2UsCiAgImVudmlyb25tZW50IiA6ICJwbGF5Z3JvdW5kIgp9.'
  })


  Klarna.Credit.load({
    container: "#klarna_container"  
  }, function(res) {
    console.debug(res);
  })
},2000);

</script>

</body>
</html>

